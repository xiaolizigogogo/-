# ESP32 与 Mega2560 接线检查清单

## 🔌 基础接线方案

### 方案1：串口通信（推荐）
```
ESP32模块              Arduino Mega 2560
┌─────────────┐        ┌─────────────────┐
│   3.3V      │────────│       3.3V      │
│   GND       │────────│       GND       │
│   GPIO1(TX) │────────│   RX1 (引脚19)   │
│   GPIO3(RX) │────────│   TX1 (引脚18)   │
│   GPIO2     │────────│   数字引脚2      │
└─────────────┘        └─────────────────┘
```

## ✅ 接线检查清单

### 1. 电源连接
- [ ] ESP32 3.3V → Mega2560 3.3V
- [ ] ESP32 GND → Mega2560 GND
- [ ] 电源电压稳定（ESP32: 3.3V, Mega2560: 5V）
- [ ] 电源容量充足（ESP32: 1A, Mega2560: 2A）

### 2. 通信连接
- [ ] ESP32 GPIO1 (TX) → Mega2560 RX1 (引脚19)
- [ ] ESP32 GPIO3 (RX) → Mega2560 TX1 (引脚18)
- [ ] 交叉连接正确（TX→RX, RX→TX）
- [ ] 连接线牢固，无松动

### 3. 状态指示
- [ ] ESP32 GPIO2 → Mega2560 数字引脚2
- [ ] LED指示灯连接正确
- [ ] 状态指示功能正常

### 4. 电平兼容性
- [ ] 使用电平转换模块（如需要）
- [ ] 3.3V与5V电平转换正常
- [ ] 信号质量良好

## 🔧 硬件要求

### ESP32模块
- [ ] ESP32-WROOM-32 或兼容模块
- [ ] 3.3V电源供应
- [ ] 足够的GPIO引脚

### Arduino Mega2560
- [ ] Arduino Mega 2560 开发板
- [ ] 5V电源供应
- [ ] Serial1串口可用

### 连接线材
- [ ] 杜邦线或面包板连接线
- [ ] 屏蔽线缆（长距离通信）
- [ ] 电源线（足够粗）

## ⚙️ 软件配置

### ESP32端配置
- [ ] Arduino IDE 安装ESP32开发板支持
- [ ] 波特率设置为115200
- [ ] 串口配置正确
- [ ] WiFi配置（如需要）

### Mega2560端配置
- [ ] Arduino IDE 安装Mega2560开发板支持
- [ ] 波特率设置为115200
- [ ] Serial1串口配置
- [ ] 引脚模式设置正确

## 🧪 测试步骤

### 1. 基础连接测试
- [ ] 上电后ESP32正常启动
- [ ] 上电后Mega2560正常启动
- [ ] 串口监视器显示正常信息
- [ ] 无错误信息输出

### 2. 通信测试
- [ ] ESP32发送数据，Mega2560能接收
- [ ] Mega2560发送数据，ESP32能接收
- [ ] 数据格式正确
- [ ] 无数据丢失

### 3. 功能测试
- [ ] 控制命令执行正常
- [ ] 状态反馈正确
- [ ] 传感器数据读取正常
- [ ] 错误处理机制工作

## 🚨 常见问题

### 问题1：通信失败
**检查项目：**
- [ ] 接线是否正确（TX→RX, RX→TX）
- [ ] 波特率是否一致（115200）
- [ ] 电源是否稳定
- [ ] 接地是否良好

### 问题2：数据错误
**检查项目：**
- [ ] 电平转换是否正常
- [ ] 信号线是否屏蔽
- [ ] 是否有电磁干扰
- [ ] 连接是否牢固

### 问题3：系统不稳定
**检查项目：**
- [ ] 电源容量是否充足
- [ ] 连接线是否过细
- [ ] 是否有接触不良
- [ ] 环境温度是否过高

### 问题4：ESP32无法启动
**检查项目：**
- [ ] 3.3V电源是否正常
- [ ] GPIO0、GPIO2状态是否正确
- [ ] 启动模式是否正确
- [ ] 固件是否损坏

## 📋 调试工具

### 串口监视器
- [ ] 波特率：115200
- [ ] 数据位：8
- [ ] 停止位：1
- [ ] 校验位：无

### 万用表
- [ ] 测量电源电压
- [ ] 检查连接通断
- [ ] 验证接地连接

### 示波器
- [ ] 检查信号质量
- [ ] 测量电压电平
- [ ] 观察时序关系

## 🔄 扩展功能

### 多设备通信
- [ ] 添加更多Mega2560设备
- [ ] 使用I2C或SPI通信
- [ ] 实现设备地址管理

### 无线功能
- [ ] WiFi数据传输
- [ ] 蓝牙通信
- [ ] 远程控制功能

### 数据记录
- [ ] SD卡数据存储
- [ ] 实时数据监控
- [ ] 历史数据查询

## 📝 记录表格

### 接线记录
| 连接点 | ESP32引脚 | Mega2560引脚 | 功能 | 状态 |
|--------|-----------|--------------|------|------|
| 电源 | 3.3V | 3.3V | 电源 | ✅ |
| 地线 | GND | GND | 接地 | ✅ |
| 发送 | GPIO1 | RX1(19) | 数据发送 | ✅ |
| 接收 | GPIO3 | TX1(18) | 数据接收 | ✅ |
| 状态 | GPIO2 | 数字2 | 状态指示 | ✅ |

### 测试记录
| 测试项目 | 预期结果 | 实际结果 | 状态 |
|----------|----------|----------|------|
| 电源电压 | 3.3V/5V | 3.3V/5V | ✅ |
| 串口通信 | 正常 | 正常 | ✅ |
| 控制命令 | 执行成功 | 执行成功 | ✅ |
| 状态反馈 | 正确 | 正确 | ✅ |

## 🎯 成功标准

### 基础功能
- [ ] 系统正常启动
- [ ] 串口通信正常
- [ ] 控制命令执行
- [ ] 状态反馈正确

### 高级功能
- [ ] WiFi连接正常
- [ ] 数据传输稳定
- [ ] 错误处理完善
- [ ] 系统运行稳定

### 性能指标
- [ ] 响应时间 < 100ms
- [ ] 数据传输率 > 1KB/s
- [ ] 系统稳定性 > 99%
- [ ] 功耗在合理范围

## 📞 技术支持

如遇到问题，请按以下顺序检查：
1. 硬件连接是否正确
2. 软件配置是否匹配
3. 电源供应是否稳定
4. 环境条件是否合适

记录问题现象和解决过程，便于后续参考。
