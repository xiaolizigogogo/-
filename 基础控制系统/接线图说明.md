# 多电机舵机控制系统接线图说明

## 1. 总体接线图

```
Arduino Mega 2560
    │
    ├── 电源系统
    │   ├── 5V电源输入
    │   └── GND接地
    │
    ├── 舵机系统
    │   ├── Pin 9 ── 舵机信号
    │   └── 5V/GND ── 舵机电源
    │
    ├── 电机系统
    │   ├── Pin 7,8,10 ── PWM控制
    │   └── Pin 4,5,6 ── 方向控制
    │
    ├── 编码器系统
    │   ├── Pin 2,3,18-23 ── CLK信号
    │   └── Pin 11-17 ── DT信号
    │
    ├── 按键系统
    │   └── Pin 31,33,35,37,39,41,43 ── 按键输入
    │
    └── 显示系统
        ├── 数码管1 ── Pin 32,34,36
        ├── 数码管2 ── Pin 22,24,26
        └── 数码管3 ── Pin 42,44,46
```

## 2. 详细接线说明

### 2.1 电源系统接线

#### 2.1.1 主电源连接
```
外部5V电源
    │
    ├── Arduino VIN ── 主控板电源输入
    ├── Arduino GND ── 主控板接地
    ├── 舵机电源正极 ── 舵机供电
    ├── 舵机电源负极 ── 舵机接地
    ├── 电机电源正极 ── 电机供电（根据电机规格）
    ├── 电机电源负极 ── 电机接地
    ├── 编码器电源正极 ── 编码器供电
    ├── 编码器电源负极 ── 编码器接地
    ├── 数码管电源正极 ── 数码管供电
    └── 数码管电源负极 ── 数码管接地
```

#### 2.1.2 电源规格要求
- **主控板电源**：5V，建议电流2A以上
- **舵机电源**：5V，根据舵机规格确定电流
- **电机电源**：根据电机规格（通常12V或24V）
- **编码器电源**：5V，每个编码器约10mA
- **数码管电源**：5V，每组数码管约50mA

### 2.2 舵机系统接线

#### 2.2.1 舵机连接图
```
标准舵机
    │
    ├── 信号线 ── Arduino Pin 9
    ├── 电源线 ── 5V电源正极
    └── 地线 ── 5V电源负极
```

#### 2.2.2 舵机规格
- **工作电压**：5V
- **控制信号**：PWM脉冲，1100μs-2000μs
- **角度范围**：0°-180°
- **中位点**：1550μs

### 2.3 电机系统接线

#### 2.3.1 电机驱动连接
```
电机1
    │
    ├── PWM控制 ── Arduino Pin 7
    ├── 方向控制1 ── Arduino Pin 4
    ├── 方向控制2 ── Arduino Pin 5
    ├── 方向控制3 ── Arduino Pin 6
    ├── 电源正极 ── 电机电源正极
    └── 电源负极 ── 电机电源负极

电机2
    │
    ├── PWM控制 ── Arduino Pin 8
    ├── 方向控制1 ── Arduino Pin 4
    ├── 方向控制2 ── Arduino Pin 5
    ├── 方向控制3 ── Arduino Pin 6
    ├── 电源正极 ── 电机电源正极
    └── 电源负极 ── 电机电源负极

电机3
    │
    ├── PWM控制 ── Arduino Pin 10
    ├── 方向控制1 ── Arduino Pin 4
    ├── 方向控制2 ── Arduino Pin 5
    ├── 方向控制3 ── Arduino Pin 6
    ├── 电源正极 ── 电机电源正极
    └── 电源负极 ── 电机电源负极
```

#### 2.3.2 电机控制逻辑
- **PWM频率**：500Hz
- **PWM分辨率**：8位（0-255）
- **方向控制**：通过Pin 4,5,6的组合控制

### 2.4 编码器系统接线

#### 2.4.1 编码器连接表
| 编码器 | CLK引脚 | DT引脚 | 电源 | 地线 | 功能 |
|--------|---------|--------|------|------|------|
| 编码器0 | Pin 2 | Pin 11 | 5V | GND | 舵机摆动幅度 |
| 编码器1 | Pin 3 | Pin 12 | 5V | GND | 舵机摆动速度 |
| 编码器2 | Pin 21 | Pin 13 | 5V | GND | 舵机停留时间 |
| 编码器3 | Pin 20 | Pin 14 | 5V | GND | 舵机中位点 |
| 编码器4 | Pin 19 | Pin 15 | 5V | GND | 电机1速度 |
| 编码器5 | Pin 18 | Pin 16 | 5V | GND | 电机2速度 |
| 编码器6 | Pin 23 | Pin 17 | 5V | GND | 电机3速度 |

#### 2.4.2 编码器接线图
```
旋转编码器
    │
    ├── CLK ── Arduino中断引脚
    ├── DT ── Arduino数字引脚
    ├── VCC ── 5V电源
    └── GND ── 电源地线
```

#### 2.4.3 编码器规格
- **工作电压**：5V
- **信号类型**：数字信号
- **分辨率**：每转24个脉冲
- **接口**：2线（CLK+DT）

### 2.5 按键系统接线

#### 2.5.1 按键连接表
| 按键 | 引脚 | 功能 | 连接方式 |
|------|------|------|----------|
| 按键1 | Pin 31 | 参数保存 | 一端接Pin 31，另一端接GND |
| 按键2 | Pin 33 | 舵机开关 | 一端接Pin 33，另一端接GND |
| 按键3 | Pin 35 | 停留时间模式切换 | 一端接Pin 35，另一端接GND |
| 按键4 | Pin 37 | 舵机开关（备用） | 一端接Pin 37，另一端接GND |
| 按键5 | Pin 39 | 电机1开关 | 一端接Pin 39，另一端接GND |
| 按键6 | Pin 41 | 电机2开关 | 一端接Pin 41，另一端接GND |
| 按键7 | Pin 43 | 电机3开关 | 一端接Pin 43，另一端接GND |

#### 2.5.2 按键接线图
```
按键
    │
    ├── 一端 ── Arduino数字引脚
    └── 另一端 ── GND
```

#### 2.5.3 按键规格
- **类型**：常开按键
- **工作电压**：5V
- **触发方式**：按下时引脚接地
- **消抖时间**：20ms

### 2.6 显示系统接线

#### 2.6.1 数码管连接表
| 数码管 | 数据引脚 | 时钟引脚 | 锁存引脚 | 功能 |
|--------|----------|----------|----------|------|
| 数码管1 | Pin 36 | Pin 34 | Pin 32 | 显示左右停留时间 |
| 数码管2 | Pin 26 | Pin 24 | Pin 22 | 显示摆动幅度和速度 |
| 数码管3 | Pin 46 | Pin 44 | Pin 42 | 显示电机速度 |

#### 2.6.2 74HC595接线图
```
74HC595移位寄存器
    │
    ├── 数据引脚 ── Arduino数字引脚
    ├── 时钟引脚 ── Arduino数字引脚
    ├── 锁存引脚 ── Arduino数字引脚
    ├── VCC ── 5V电源
    ├── GND ── 电源地线
    ├── 输出引脚 ── 数码管段选
    └── 使能引脚 ── GND（使能）
```

#### 2.6.3 数码管规格
- **显示类型**：7段数码管
- **驱动芯片**：74HC595
- **工作电压**：5V
- **显示位数**：每组4位

## 3. 接线注意事项

### 3.1 电源隔离
- **数字电源**：Arduino、编码器、按键、数码管使用5V数字电源
- **模拟电源**：舵机使用独立的5V电源
- **电机电源**：电机使用独立的电源（通常12V或24V）

### 3.2 信号隔离
- **PWM信号**：舵机和电机的PWM信号线要远离干扰源
- **编码器信号**：编码器信号线要短且远离电机电源线
- **按键信号**：按键信号线要加适当的上拉电阻

### 3.3 接地处理
- **单点接地**：所有地线最终汇集到一点
- **信号地**：数字信号的地线要独立
- **电源地**：大电流设备的地线要粗一些

### 3.4 线材选择
- **信号线**：使用屏蔽线或双绞线
- **电源线**：根据电流大小选择合适的线径
- **连接器**：使用可靠的连接器，避免虚接

## 4. 接线检查清单

### 4.1 上电前检查
- [ ] 所有电源连接正确
- [ ] 所有地线连接正确
- [ ] 所有信号线连接正确
- [ ] 没有短路现象
- [ ] 电源电压符合要求

### 4.2 功能检查
- [ ] 舵机能够正常转动
- [ ] 电机能够正常转动
- [ ] 编码器能够正常计数
- [ ] 按键能够正常触发
- [ ] 数码管能够正常显示

### 4.3 信号检查
- [ ] PWM信号波形正常
- [ ] 编码器信号无干扰
- [ ] 按键信号无抖动
- [ ] 数码管信号稳定

## 5. 常见接线错误

### 5.1 电源错误
- **电压错误**：使用错误的电源电压
- **极性错误**：电源正负极接反
- **容量不足**：电源电流容量不够

### 5.2 信号错误
- **引脚错误**：连接到错误的引脚
- **方向错误**：编码器CLK和DT接反
- **电平错误**：信号电平不匹配

### 5.3 连接错误
- **虚接**：连接不牢固
- **短路**：信号线之间短路
- **断路**：信号线断开

## 6. 接线优化建议

### 6.1 布局优化
- **模块化布局**：按功能模块分组布局
- **信号线最短**：尽量减少信号线长度
- **电源线分离**：电源线和信号线分开走线

### 6.2 屏蔽优化
- **信号屏蔽**：重要信号线使用屏蔽线
- **接地屏蔽**：屏蔽层正确接地
- **距离屏蔽**：干扰源和敏感信号保持距离

### 6.3 维护优化
- **标识清楚**：所有连接线做好标识
- **连接可靠**：使用可靠的连接方式
- **便于维护**：接线要便于后续维护

---

**接线图版本**：v1.0  
**适用系统版本**：v1.0  
**最后更新**：2024年  
**维护人员**：系统开发者 