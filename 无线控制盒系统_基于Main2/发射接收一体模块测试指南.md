# 发射接收一体模块测试指南

## 模块确认

既然您确认两个设备都有**433MHz发射接收一体模块**，那么问题可能在于：

1. **接收功能配置**
2. **数据接收处理**
3. **配对逻辑**

## 测试步骤

### 1. 使用专用测试程序

上传 `发射接收一体模块测试.ino` 到两个Arduino设备：

**程序特点**：
- 专门为发射接收一体模块设计
- 持续监听接收数据
- 详细的调试输出
- 简化的配对逻辑

### 2. 配对操作

1. **两个设备都长按bt1键3秒**进入配对模式
2. **观察串口输出**，看是否能收到对方的数据

### 3. 预期输出

**正常情况**：
```
=== 发射接收一体模块测试程序 ===
>>> 发送测试数据...
发送数据: 0xFD 0xAA 0x55 0xAA 0x55 0xAA 0xDF
实际发送字节数: 7
未收到响应

>>> bt1长按3秒，进入配对模式！
>>> 配对模式：发送配对请求
>>> 准备发送配对请求: 0xFD 0x0E 0x00 0x00 0x00 0x00 0xDF
>>> Serial2可用，开始发送...
>>> 实际发送字节数: 7
>>> 配对请求发送完成
>>> 收到数据: 0xFD 0x0E 0x00 0x00 0x00 0x00 0xDF
>>> 配对模式已启动5秒，假设配对成功
>>> 退出配对模式，进入正常工作状态
```

**关键观察点**：
- 是否显示"收到数据"
- 收到的数据是否是配对请求格式
- 两个设备是否能互相收到数据

## 故障排除

### 1. 如果两个设备都收不到对方数据

**可能原因**：
- 模块接收功能未启用
- 模块需要特殊配置
- 接线问题

**解决方案**：
- 检查模块说明书，确认接收功能如何启用
- 尝试不同的数据格式
- 检查模块工作模式

### 2. 如果只有一个设备能收到数据

**可能原因**：
- 一个模块的接收功能有问题
- 接线不对称
- 模块配置不同

**解决方案**：
- 交换两个模块测试
- 检查接线是否一致
- 确认模块型号相同

### 3. 如果模块不响应

**可能原因**：
- 模块需要学习模式
- 模块需要特殊唤醒
- 模块工作频率不匹配

**解决方案**：
- 查看模块说明书
- 尝试不同的唤醒序列
- 确认工作频率

## 模块配置检查

### 1. 确认模块类型
- 型号是否相同
- 工作频率是否一致（433MHz）
- 是否需要特殊配置

### 2. 检查模块状态
- LED指示灯状态
- 工作电压是否正常
- 模块是否发热

### 3. 测试模块功能
- 用USB-TTL测试发射功能
- 用USB-TTL测试接收功能
- 确认双向通信正常

## 下一步

1. **运行测试程序**：上传 `发射接收一体模块测试.ino`
2. **观察输出**：看是否能收到对方数据
3. **提供结果**：告诉我测试结果

如果测试程序显示"收到数据"，说明通信正常，问题在于配对逻辑。
如果没有收到数据，说明模块接收功能有问题，需要检查模块配置。

## 重要提醒

发射接收一体模块可能需要：
- 特殊的学习模式
- 特定的唤醒序列
- 正确的配置参数

请查看您的模块说明书，确认：
1. 如何启用接收功能
2. 是否需要学习模式
3. 工作参数设置
