# 无线控制盒系统项目结构说明

## 项目概述

本项目实现了基于 `Main(2).ino` 的无线控制盒系统，支持主控制器和无线控制盒之间的无线通信和数据同步。

## 文件结构

```
无线控制盒系统_基于Main2/
├── 主控制器/                          # 主控制器相关文件
│   └── Main_Wireless_Master/          # 主控制器Arduino项目
│       └── Main_Wireless_Master.ino   # 主控制器代码
│
├── 无线控制盒/                         # 无线控制盒相关文件
│   └── WirelessControlBox/            # 无线控制盒Arduino项目
│       └── WirelessControlBox.ino     # 无线控制盒代码
│
└── 文档/                              # 项目文档
    ├── README.md                      # 项目概述
    ├── 使用指南.md                    # 详细使用指南
    ├── 433MHz模块接线说明.md          # 433MHz模块接线说明
    ├── 发射接收一体模块适配说明.md    # 发射接收一体模块适配说明
    ├── 接线图.md                      # 接线图
    └── 数据同步说明.md                # 数据同步说明
```

## Arduino IDE使用说明

### 1. 主控制器项目

#### 打开项目
1. 打开Arduino IDE
2. 选择 `文件` → `打开`
3. 导航到 `无线控制盒系统_基于Main2/主控制器/Main_Wireless_Master/`
4. 选择 `Main_Wireless_Master.ino` 文件
5. 点击 `打开`

#### 编译和上传
1. 确保已选择正确的开发板（Arduino Mega 2560）
2. 确保已选择正确的端口
3. 点击 `验证` 按钮进行编译
4. 编译成功后，点击 `上传` 按钮上传到主控制器

### 2. 无线控制盒项目

#### 打开项目
1. 打开Arduino IDE
2. 选择 `文件` → `打开`
3. 导航到 `无线控制盒系统_基于Main2/无线控制盒/WirelessControlBox/`
4. 选择 `WirelessControlBox.ino` 文件
5. 点击 `打开`

#### 编译和上传
1. 确保已选择正确的开发板（Arduino Mega 2560）
2. 确保已选择正确的端口
3. 点击 `验证` 按钮进行编译
4. 编译成功后，点击 `上传` 按钮上传到无线控制盒

## 项目特点

### 1. 符合Arduino IDE要求
- 每个项目都有独立的文件夹
- 文件夹名称与.ino文件名称相同
- 可以直接在Arduino IDE中打开和编译

### 2. 清晰的文档结构
- 所有文档集中在 `文档` 文件夹中
- 包含详细的使用指南和接线说明
- 提供故障排除和调试方法

### 3. 模块化设计
- 主控制器和无线控制盒代码分离
- 便于维护和更新
- 支持独立开发和测试

## 使用步骤

### 1. 硬件准备
1. 准备两个Arduino Mega 2560开发板
2. 准备两个433MHz发射接收一体模块
3. 准备相关硬件（编码器、按键、电机、舵机等）
4. 按照 `文档/433MHz模块接线说明.md` 进行接线

### 2. 软件准备
1. 安装Arduino IDE
2. 安装必要的库：
   - FBLed
   - DeviceConfig
   - Servo
   - myButton
   - KeyValueEEPROM
   - EEPROM
   - **RCSwitch**（重要：需要手动安装）

#### RCSwitch库安装步骤

**方法1：通过Arduino IDE库管理器安装（推荐）**
1. 打开Arduino IDE
2. 选择 `工具` → `管理库...`
3. 在搜索框中输入 `RCSwitch`
4. 找到 `RCSwitch` 库（作者：Suat Özgür）
5. 点击 `安装` 按钮

**方法2：手动安装**
1. 访问GitHub：https://github.com/sui77/rc-switch
2. 点击 `Code` → `Download ZIP`
3. 解压文件并重命名为 `RCSwitch`
4. 复制到Arduino库文件夹：
   - **Windows**：`C:\Users\[用户名]\Documents\Arduino\libraries\`
   - **macOS**：`~/Documents/Arduino/libraries/`
   - **Linux**：`~/Arduino/libraries/`
5. 重启Arduino IDE

**验证安装**
1. 在Arduino IDE中，选择 `项目` → `加载库`
2. 查看是否有 `RCSwitch` 选项
3. 如果有，说明安装成功

详细安装指南请参考：`文档/RCSwitch库安装指南.md`

### 3. 代码上传
1. 先上传主控制器代码
2. 再上传无线控制盒代码
3. 观察串口输出，确认初始化成功

### 4. 测试验证
1. 检查两个设备是否成功配对
2. 测试数据同步功能
3. 测试协同控制功能

## 注意事项

### 1. 文件命名
- 项目文件夹名称必须与.ino文件名称完全相同
- 不要修改.ino文件的名称
- 不要修改项目文件夹的名称

### 2. 库依赖
- 确保所有必需的库都已安装
- 库版本要兼容
- 如果缺少库，Arduino IDE会提示错误

### 3. 硬件连接
- 严格按照接线说明进行连接
- 检查所有连接是否牢固
- 确认电源电压是否正常

### 4. 调试方法
- 使用串口监视器查看调试信息
- 检查无线连接状态
- 验证数据同步是否正常

## 故障排除

### 1. 编译错误
- 检查库是否已安装
- 检查代码语法是否正确
- 检查Arduino IDE版本是否兼容

### 2. 上传失败
- 检查开发板选择是否正确
- 检查端口选择是否正确
- 检查USB连接是否正常

### 3. 通信问题
- 检查433MHz模块连接
- 检查天线是否连接
- 检查设备距离是否过远

### 4. 数据不同步
- 检查设备配对状态
- 检查无线连接状态
- 重启设备重新配对

## 技术支持

如遇到问题，请按以下步骤进行：

1. 查看 `文档/使用指南.md`
2. 检查 `文档/故障排除.md`
3. 查看串口输出的错误信息
4. 联系技术支持团队

## 版本信息

- 版本：1.0
- 发布日期：2024年
- 基于：Main(2).ino
- 开发语言：Arduino C++
