# ESP32 + Mega 2560 无线控制系统

## 项目简介

本项目是一个基于ESP32和Arduino Mega 2560的无线控制系统，用于替代原有的nRF24L01方案。系统通过WiFi提供Web界面控制，通过串口通信实现ESP32与Mega 2560之间的数据交换。

## 系统优势

相比nRF24L01方案，本系统具有以下优势：

- ✅ **更稳定的通信**：WiFi比nRF24L01更稳定可靠
- ✅ **更远的控制距离**：WiFi覆盖范围更大
- ✅ **更丰富的功能**：支持Web界面、移动端控制
- ✅ **更简单的配置**：无需复杂的射频配置
- ✅ **更好的扩展性**：易于添加新功能
- ✅ **更低的成本**：ESP32价格更便宜，功能更强大

## 系统架构

```
[Web浏览器/手机] ←→ [WiFi] ←→ [ESP32主控制器] ←→ [串口通信] ←→ [Mega 2560从控制器] ←→ [硬件设备]
```

## 文件结构

```
ESP32替代方案/
├── ESP32_Master_Controller.ino    # ESP32主控制器代码
├── Mega2560_Slave_Controller.ino  # Mega 2560从控制器代码
├── 通信协议说明.md                 # 详细的通信协议文档
├── 接线指南.md                    # 硬件连接指南
├── 使用指南.md                    # 系统使用说明
└── README.md                      # 项目说明文档
```

## 快速开始

### 1. 硬件准备
- ESP32开发板 × 1
- Arduino Mega 2560开发板 × 1
- 电机驱动模块（如L298N）× 2
- 直流电机 × 2
- LED指示灯 × 1
- 温度传感器 × 1
- 湿度传感器 × 1

### 2. 软件配置
1. 按照《接线指南.md》完成硬件连接
2. 修改ESP32代码中的WiFi配置
3. 上传代码到ESP32和Mega 2560
4. 在浏览器中访问ESP32的IP地址

### 3. 功能使用
- 通过Web界面控制电机和LED
- 实时监控传感器数据
- 支持移动端控制
- 提供API接口供第三方应用集成

## 主要功能

### 电机控制
- 双电机独立控制
- 速度调节（0-255）
- 方向控制
- 实时状态反馈

### LED控制
- LED开关控制
- 状态指示
- 实时状态显示

### 传感器监控
- 温度传感器读取
- 湿度传感器读取
- 实时数据更新

### 系统控制
- 紧急停止功能
- 系统重置功能
- 心跳检测机制

## 技术特点

### 通信协议
- 基于串口的可靠通信
- 标准化的命令格式
- 自动错误检测和恢复

### Web界面
- 响应式设计
- 实时数据更新
- 移动端友好

### API接口
- RESTful API设计
- JSON数据格式
- 支持第三方集成

## 文档说明

- **《接线指南.md》**：详细的硬件连接说明，包括引脚分配、电源方案、注意事项等
- **《通信协议说明.md》**：完整的通信协议文档，包括命令格式、响应格式、错误处理等
- **《使用指南.md》**：系统使用说明，包括快速开始、功能使用、故障排除等

## 开发环境

- Arduino IDE 1.8.x 或更高版本
- ESP32开发板支持包
- 标准Arduino库

## 依赖库

### ESP32代码依赖
- WiFi库（内置）
- WebServer库（内置）
- ArduinoJson库
- SoftwareSerial库

### Mega 2560代码依赖
- SoftwareSerial库（内置）

## 安装说明

1. 安装Arduino IDE
2. 安装ESP32开发板支持包
3. 安装ArduinoJson库
4. 下载项目代码
5. 按照文档完成硬件连接
6. 上传代码到开发板

## 使用示例

### Web界面控制
1. 打开浏览器
2. 访问ESP32的IP地址
3. 使用界面控制电机和LED
4. 查看实时传感器数据

### API接口调用
```bash
# 获取设备状态
curl http://192.168.1.100/api/status

# 控制电机
curl -X POST http://192.168.1.100/api/motor \
  -H "Content-Type: application/json" \
  -d '{"motor": 1, "action": "on", "speed": 128}'
```

## 故障排除

常见问题及解决方案请参考《使用指南.md》中的故障排除章节。

## 扩展开发

系统设计具有良好的扩展性，支持：
- 添加新的控制设备
- 集成新的传感器
- 开发移动端应用
- 实现多设备管理

## 版本信息

- 当前版本：v1.0
- 发布日期：2024年
- 兼容性：ESP32 + Arduino Mega 2560

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进项目。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至项目维护者

---

**注意**：使用本系统前请仔细阅读所有文档，确保正确连接硬件和配置软件。





