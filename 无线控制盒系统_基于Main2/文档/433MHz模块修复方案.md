# 433MHzæ¨¡å—ä¿®å¤æ–¹æ¡ˆ

## ğŸš¨ **é—®é¢˜ç¡®è®¤**

ä»ä½ çš„ä¸²å£è¾“å‡ºå¯ä»¥ç¡®è®¤ï¼š
- **XR602é¥æ§å™¨å·¥ä½œæ­£å¸¸**ï¼šèƒ½æ”¶åˆ°å®Œæ•´æ•°æ®å¸§ `FD 03 37 F5 03 4B DF`
- **æ— çº¿æ§åˆ¶ç›’æœ‰é—®é¢˜**ï¼šå‘é€çš„æ•°æ®è¢«æ¥æ”¶ä¸º `0xF0` é”™è¯¯ä»£ç 

## ğŸ”§ **ç«‹å³ä¿®å¤æ–¹æ¡ˆ**

### **æ–¹æ¡ˆ1ï¼šä¿®æ”¹å‘é€æ—¶åºï¼ˆæ¨èï¼‰**

#### ä¿®æ”¹æ— çº¿æ§åˆ¶ç›’ä»£ç ä¸­çš„å‘é€å‡½æ•°ï¼š

```cpp
// åœ¨ WirelessControlBox.ino ä¸­æ‰¾åˆ° sendWirelessData å‡½æ•°
// å°†åŸæ¥çš„ä»£ç ï¼š
Serial2.write(0xFD);
Serial2.write(command);
Serial2.write(data1);
Serial2.write(data2);
Serial2.write(data3);
Serial2.write(data4);
Serial2.write(0xDF);
Serial2.flush();

// ä¿®æ”¹ä¸ºï¼š
Serial2.write(0xFD);  // å¸§å¤´
delay(2);             // å¢åŠ å»¶æ—¶
Serial2.write(command);
delay(2);
Serial2.write(data1);
delay(2);
Serial2.write(data2);
delay(2);
Serial2.write(data3);
delay(2);
Serial2.write(data4);
delay(2);
Serial2.write(0xDF);  // å¸§å°¾
Serial2.flush();
```

#### ä¿®æ”¹é…å¯¹è¯·æ±‚å‘é€å‡½æ•°ï¼š

```cpp
// åœ¨ sendPairingRequest å‡½æ•°ä¸­ï¼š
Serial2.write(0xFD);
delay(2);
Serial2.write(0x0E);
delay(2);
Serial2.write(0x00);
delay(2);
Serial2.write(0x00);
delay(2);
Serial2.write(0x00);
delay(2);
Serial2.write(0x00);
delay(2);
Serial2.write(0xDF);
Serial2.flush();
```

### **æ–¹æ¡ˆ2ï¼šå¢åŠ å‘é€é—´éš”**

#### åœ¨æ— çº¿æ§åˆ¶ç›’ä»£ç ä¸­æ·»åŠ å‘é€é—´éš”æ§åˆ¶ï¼š

```cpp
// åœ¨ param_t ç»“æ„ä½“ä¸­æ·»åŠ ï¼š
unsigned long lastSendTime = 0;
unsigned long sendInterval = 100; // 100mså‘é€é—´éš”

// åœ¨ sendWirelessData å‡½æ•°å¼€å¤´æ·»åŠ ï¼š
unsigned long currentTime = millis();
if (currentTime - Val.lastSendTime < Val.sendInterval) {
  return; // å‘é€é—´éš”å¤ªçŸ­ï¼Œè·³è¿‡
}
Val.lastSendTime = currentTime;
```

### **æ–¹æ¡ˆ3ï¼šæ¸…ç©ºæ¥æ”¶ç¼“å†²åŒº**

#### åœ¨å‘é€å‰æ¸…ç©ºæ¥æ”¶ç¼“å†²åŒºï¼š

```cpp
// åœ¨ sendWirelessData å‡½æ•°å¼€å¤´æ·»åŠ ï¼š
while (Serial2.available()) {
  Serial2.read(); // æ¸…ç©ºæ¥æ”¶ç¼“å†²åŒº
}
```

## ğŸ“‹ **å®Œæ•´ä¿®å¤æ­¥éª¤**

### **æ­¥éª¤1ï¼šä¿®æ”¹æ— çº¿æ§åˆ¶ç›’ä»£ç **

1. æ‰“å¼€ `WirelessControlBox.ino`
2. æ‰¾åˆ° `sendWirelessData` å‡½æ•°
3. æŒ‰ç…§æ–¹æ¡ˆ1ä¿®æ”¹å‘é€æ—¶åº
4. æŒ‰ç…§æ–¹æ¡ˆ2æ·»åŠ å‘é€é—´éš”
5. æŒ‰ç…§æ–¹æ¡ˆ3æ·»åŠ ç¼“å†²åŒºæ¸…ç†

### **æ­¥éª¤2ï¼šä¿®æ”¹ä¸»æ§åˆ¶å™¨ä»£ç **

1. æ‰“å¼€ `Main_Wireless_Master.ino`
2. åœ¨ `processWirelessCommand` å‡½æ•°ä¸­æ·»åŠ é”™è¯¯å¤„ç†ï¼š

```cpp
// åœ¨è¯»å–æ•°æ®æ—¶æ·»åŠ é”™è¯¯æ£€æŸ¥ï¼š
if (receivedByte == 0xF0) {
  Serial.println("!!! æ£€æµ‹åˆ°F0é”™è¯¯ä»£ç ");
  Serial.println("!!! è¿™è¡¨ç¤º433MHzæ¨¡å—æœ‰é—®é¢˜");
  continue; // è·³è¿‡é”™è¯¯æ•°æ®
}
```

### **æ­¥éª¤3ï¼šæµ‹è¯•ä¿®å¤æ•ˆæœ**

1. é‡æ–°ç¼–è¯‘å¹¶ä¸Šä¼ ä¿®å¤åçš„ä»£ç 
2. è§‚å¯Ÿä¸²å£è¾“å‡º
3. æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ `0xF0` é”™è¯¯
4. æµ‹è¯•é…å¯¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸

## ğŸ¯ **é¢„æœŸä¿®å¤æ•ˆæœ**

ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š
- âœ… ä¸å†æ”¶åˆ° `0xF0` é”™è¯¯ä»£ç 
- âœ… èƒ½æ­£å¸¸å‘é€å’Œæ¥æ”¶æ•°æ®å¸§
- âœ… é…å¯¹åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… æ•°æ®åŒæ­¥ç¨³å®šå¯é 

## ğŸš€ **ç«‹å³è¡ŒåŠ¨**

1. **å…ˆä¿®æ”¹æ— çº¿æ§åˆ¶ç›’ä»£ç **ï¼ˆ5åˆ†é’Ÿï¼‰
2. **å†ä¿®æ”¹ä¸»æ§åˆ¶å™¨ä»£ç **ï¼ˆ5åˆ†é’Ÿï¼‰
3. **é‡æ–°ä¸Šä¼ æµ‹è¯•**ï¼ˆ5åˆ†é’Ÿï¼‰
4. **éªŒè¯é€šä¿¡åŠŸèƒ½**ï¼ˆ5åˆ†é’Ÿï¼‰

è¿™æ ·å°±èƒ½å¿«é€Ÿè§£å†³ `0xF0` é”™è¯¯é—®é¢˜ï¼
