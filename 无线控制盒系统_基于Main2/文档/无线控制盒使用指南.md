# 无线控制盒使用指南

## 系统概述

无线控制盒系统由两个主要组件组成：
1. **主控制器** - 负责核心控制和执行
2. **无线控制盒** - 负责远程控制和数据输入

两个设备通过433MHz无线模块进行通信，实现远程控制功能。

## 硬件配置

### 主控制器
- **微控制器**: Arduino Mega 2560
- **433MHz模块**: 连接到Serial2 (16/17引脚)
- **编码器**: 5个旋转编码器
- **电机**: 直流电机控制
- **舵机**: 转向舵机控制

### 无线控制盒
- **微控制器**: Arduino Mega 2560
- **433MHz模块**: 连接到Serial2 (16/17引脚)
- **编码器**: 5个旋转编码器
- **按键**: 5个控制按键

## 接线配置

### 433MHz模块接线
```
433MHz模块          Arduino Mega 2560
┌─────────────┐     ┌─────────────────┐
│    VCC      │────▶│       5V        │
│    GND      │────▶│       GND       │
│    TXD      │────▶│   引脚16 (RX)    │
│    RXD      │────▶│   引脚17 (TX)    │
└─────────────┘     └─────────────────┘
```

**重要**: 接线必须交叉连接，TXD连接到RX，RXD连接到TX。

## 通信协议

### 数据格式
所有无线通信使用7字节数据格式：
```
FD [命令] [数据1] [数据2] [数据3] [数据4] DF
```

### 常用命令
- **0x0E**: 配对请求
- **0x0F**: 配对确认
- **0x30**: 心跳包
- **0x20-0x24**: 编码器数据
- **0x01**: 记录参数
- **0x02**: 舵机开关
- **0x03**: 电机开关

## 使用步骤

### 1. 硬件连接
1. 按照接线图连接433MHz模块
2. 确保电源稳定供应
3. 检查所有连接牢固

### 2. 软件上传
1. 将主控制器程序上传到主控制器Arduino
2. 将无线控制盒程序上传到控制盒Arduino
3. 确保两个设备都正常启动

### 3. 配对过程
1. 两个设备上电后自动开始配对
2. 观察串口监视器输出配对状态
3. 配对成功后LED指示灯会显示连接状态

### 4. 正常使用
1. 旋转编码器控制相应参数
2. 按键控制开关功能
3. 数据实时同步到主控制器

## 调试方法

### 串口监视器
- **波特率**: 115200
- **用途**: 查看调试信息和通信状态

### LED指示灯
- **模块LED**: 显示433MHz模块工作状态
- **连接LED**: 显示配对和连接状态

### 常见问题排查
1. **无法配对**: 检查接线和数据格式
2. **数据不同步**: 检查编码器连接
3. **通信中断**: 检查电源和距离

## 技术参数

- **通信频率**: 433MHz
- **波特率**: 9600bps
- **数据格式**: 7字节
- **通信距离**: 10-50米（视环境而定）
- **工作电压**: 5V
- **工作温度**: -10°C ~ +70°C

## 注意事项

1. **电源稳定**: 确保5V电源稳定供应
2. **接地连接**: 确保GND正确连接
3. **模块距离**: 两个模块之间保持适当距离
4. **干扰源**: 避免强电磁干扰源
5. **接线检查**: 定期检查接线是否牢固

## 维护保养

1. **定期检查**: 检查接线和模块状态
2. **清洁保养**: 保持模块清洁
3. **软件更新**: 及时更新固件版本
4. **故障记录**: 记录故障现象和解决方案
